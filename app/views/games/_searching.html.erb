<% platforms = [] %>
<% @platforms_string = ""%>
<% testing = nil %>
<% selected_game = @game_list.sample %>
<% platforms_array = selected_game.fetch("platforms") %>

<% platforms_array.each do |loop| %>
  <% testing = loop %>
  <% platforms.push(testing.fetch("name")) %>
<% end %>

<% platforms.each do |name| %>
  <% if name == platforms.last %>
    <% @platforms_string = @platforms_string + name%>
  <% else %>
    <% @platforms_string = @platforms_string + name + " / " %>
  <% end %>
<% end %>

<% image = selected_game.fetch("image") %>
<% @image_icon = image.fetch("original_url") %>
<% @api_id = selected_game.fetch("id") %>

<div class="d-flex flex-column align-items-center card" style="max-width: 40vh;">
  <div class="card-body">


    <%= image_tag(@image_icon, class: "card-img-top") %>

    <h1 class="card-title text-center">
      <%= @title = selected_game.fetch("name")%>
    </h1>

    <ul class="list-group list-group-flush">
      <li class="list-group-item">
        Available on: <%= @platforms_string %>
      </li>

      <% if selected_game.fetch("deck") == nil%>
        <li class="list-group-item">
          <%= @description = "Sorry, no description available" %>
        </li>
      <% else %>
        <li class="list-group-item">
          <%= @description = selected_game.fetch("deck") %>
        </li>
      <% end %>
      
    </ul>

    <div>
      <%= render "form", game: @game %>
    </div>
  </div>
</div>
